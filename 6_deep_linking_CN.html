<div class="-cx-PRIVATE-devsiteDocumentation__translated"><div id="fb-root"></div><div class="-cx-PRIVATE-xuiCard__root -cx-PRIVATE-devsiteCard__root -cx-PRIVATE-devsiteCard__prettyprint-dark -cx-PRIVATE-xuiCommon__backgroundwhite"><div class="-cx-PRIVATE-xuiCard__section -cx-PUBLIC-devsiteCard__contentsection"><h1>应用广告中的深度链接</h1><a class="-cx-PRIVATE-abstractButton__root -cx-PRIVATE-devsiteDocsButton__root -cx-PRIVATE-devsiteDocsButton__large -cx-PRIVATE-devsiteDocsButton__special" role="button" href="https://www.facebook.com/ads/create" target="_blank">创建广告</a><a class="-cx-PRIVATE-abstractButton__root -cx-PRIVATE-devsiteDocsButton__root -cx-PRIVATE-devsiteDocsButton__large -cx-PRIVATE-devsiteDocsButton__confirm" role="button" href="/tools/app-ads-helper/" target="_blank">验证应用广告设置</a></div></div><div class="-cx-PRIVATE-xuiCard__root -cx-PRIVATE-devsiteCard__root -cx-PRIVATE-devsiteCard__prettyprint-dark -cx-PRIVATE-xuiCommon__backgroundwhite"><div class="-cx-PRIVATE-xuiCard__section -cx-PUBLIC-devsiteCard__contentsection"><p>用户首次打开您的应用时，您可以通过深度链接将用户直接定向至其感兴趣的内容。您可以在任何广告格式中使用深度链接：移动应用安装广告和移动应用使用率广告。</p><h4>对广告有何帮助</h4><p>为应用广告使用深度链接时，您可减去用户点击广告到获得感兴趣的内容（例如假期特惠）之间的多余步骤，呈现更加无缝的客户体验。若不使用深度链接，用户就必须手动搜索需要的内容，这存在用户中途放弃的风险。</p><hr><h4>- <a href="#how-it-works">运作方式</a></h4><h4>- <a href="#step-by-step">分步指南</a></h4></div></div><div class="-cx-PRIVATE-xuiCard__root -cx-PRIVATE-devsiteCard__root -cx-PRIVATE-devsiteCard__prettyprint-dark -cx-PRIVATE-xuiCommon__backgroundwhite"><div class="-cx-PRIVATE-xuiCard__section -cx-PUBLIC-devsiteCard__contentsection"><h2 id="how-it-works">运作方式</h2><ol><li>您的广告将展示<strong>个性化内容</strong>，我们以<em>旧金山旅游</em>为例。 </li><li>用户将<strong>下载您的应用</strong>。</li><li>通过使用深度链接，用户可回到他们的<strong>兴趣点</strong>，即<em>旧金山旅游</em>。</li></ol><img class="-cx-PRIVATE-devsiteMarkdownWikiImage__root -cx-PRIVATE-devsiteMarkdownWikiImage__centered img" src="https://scontent-iad3-1.xx.fbcdn.net/t39.2365-6/13065872_1706822516243731_1664096159_n.png" width="700"><p>用户在应用内会直接看到他们点击广告时感兴趣的相关内容，从而更有可能与应用内容互动。</p></div></div><div class="-cx-PRIVATE-xuiCard__root -cx-PRIVATE-devsiteCard__root -cx-PRIVATE-devsiteCard__prettyprint-dark -cx-PRIVATE-xuiCommon__backgroundwhite"><div class="-cx-PRIVATE-xuiCard__section -cx-PUBLIC-devsiteCard__contentsection"><h2 id="step-by-step">分步指南</h2><h4>1.<a href="#os">iOS 与 Android 设置</a></h4><h4>2.<a href="#sdk">Facebook SDK</a></h4><h4>3.<a href="#settings">Facebook 应用设置</a></h4><h4>4.<a href="#deferred-deep-linking">延迟的深度链接</a></h4><h4>5.<a href="#verify">验证深度链接设置</a></h4><h4>6.<a href="#create-deeplink-ad">为广告添加深度链接</a></h4><hr><h3 id="os">1. iOS 与 Android 设置</h3><h4 id="ios">iOS</h4><p>您可利用 Bolts 框架轻松处理深度链接。您可通过 Github 详细了解该框架：https://github.com/BoltsFramework/Bolts-iOS。</p><p>如果不想使用 Bolts 框架，也可参照以下教程：</p><ul class="uiList -cx-PRIVATE-uiList__bulleted -cx-PRIVATE-uiList__vert"><li><div class="fcb"><a href="http://l.stephanalber.sb.facebook.com/l.php?d=AQFsB9kLUTqw5UbfRoWxduxwNX3qVjKvMon9RXtT_mWUX8W7LBrlHDgWEl4&amp;u=http%3A%2F%2Fwww.idev101.com%2Fcode%2FObjective-C%2Fcustom_url_schemes.html&amp;h=8AQEjxb1Q&amp;s=1" rel="nofollow nofollow" target="_blank" onmouseover="LinkshimAsyncLink.swap(this, &quot;http:\/\/www.idev101.com\/code\/Objective-C\/custom_url_schemes.html&quot;);" onclick="LinkshimAsyncLink.referrer_log(this, &quot;http:\/\/www.idev101.com\/code\/Objective-C\/custom_url_schemes.html&quot;, &quot;\/si\/ajax\/l\/render_linkshim_log\/?u=http\u00253A\u00252F\u00252Fwww.idev101.com\u00252Fcode\u00252FObjective-C\u00252Fcustom_url_schemes.html&amp;h=8AQEjxb1Q&amp;render_verification=0&amp;enc&amp;d=AQFsB9kLUTqw5UbfRoWxduxwNX3qVjKvMon9RXtT_mWUX8W7LBrlHDgWEl4&quot;);">Objective-C：自定义网址方案</a> (idev101.com)</div></li><li><div class="fcb"><a href="http://l.stephanalber.sb.facebook.com/l.php?d=AQGCEjJaqPG2pQZ8QUftwbD4K1W0X1pOFPz5PjaUq2Rsuszw_a838MpWL3s&amp;u=http%3A%2F%2Fblog.originate.com%2Fblog%2F2014%2F04%2F22%2Fdeeplinking-in-ios%2F&amp;h=jAQFB_SCp&amp;s=1" rel="nofollow nofollow" target="_blank" onmouseover="LinkshimAsyncLink.swap(this, &quot;http:\/\/blog.originate.com\/blog\/2014\/04\/22\/deeplinking-in-ios\/&quot;);" onclick="LinkshimAsyncLink.referrer_log(this, &quot;http:\/\/blog.originate.com\/blog\/2014\/04\/22\/deeplinking-in-ios\/&quot;, &quot;\/si\/ajax\/l\/render_linkshim_log\/?u=http\u00253A\u00252F\u00252Fblog.originate.com\u00252Fblog\u00252F2014\u00252F04\u00252F22\u00252Fdeeplinking-in-ios\u00252F&amp;h=jAQFB_SCp&amp;render_verification=0&amp;enc&amp;d=AQGCEjJaqPG2pQZ8QUftwbD4K1W0X1pOFPz5PjaUq2Rsuszw_a838MpWL3s&quot;);">iOS 深度链接</a> (blog.originate.com)</div></li></ul><h4 id="android">Android</h4><p>阅读 android.com 的官方教程：<a href="https://our.stephanalber.sb.facebook.com/l.php?d=AQFr95q5tsEOiwJghldEGjLieshYRz_6RBh4vTfHw0S1vNj1MfIiUWAoHkw&amp;u=https%3A%2F%2Fdeveloper.android.com%2Ftraining%2Fapp-indexing%2Fdeep-linking.html&amp;h=pAQHho2_l&amp;s=1" rel="nofollow nofollow" target="_blank" onmouseover="LinkshimAsyncLink.swap(this, &quot;https:\/\/developer.android.com\/training\/app-indexing\/deep-linking.html&quot;);" onclick="LinkshimAsyncLink.referrer_log(this, &quot;https:\/\/developer.android.com\/training\/app-indexing\/deep-linking.html&quot;, &quot;\/si\/ajax\/l\/render_linkshim_log\/?u=https\u00253A\u00252F\u00252Fdeveloper.android.com\u00252Ftraining\u00252Fapp-indexing\u00252Fdeep-linking.html&amp;h=pAQHho2_l&amp;render_verification=0&amp;enc&amp;d=AQFr95q5tsEOiwJghldEGjLieshYRz_6RBh4vTfHw0S1vNj1MfIiUWAoHkw&quot;);">为应用内容部署深度链接</a>。</p><h3 id="sdk">2.Facebook SDK</h3><p>依照关于 <a href="/docs/ads-for-apps-dev/sdk#step-by-step">Facebook SDK 设置</a>的分步指南进行操作。该指南介绍了以下操作的方法：</p><ol><li>获取 Facebook 应用编号 </li><li>向您的应用添加 Facebook SDK </li><li>启用安装追踪</li></ol><a class="-cx-PRIVATE-abstractButton__root -cx-PRIVATE-devsiteDocsButton__root -cx-PRIVATE-devsiteDocsButton__medium -cx-PRIVATE-devsiteDocsButton__default" role="button" href="/docs/ads-for-apps-dev/sdk#step-by-step">Facebook SDK 设置</a><h3 id="settings">3.Facebook 应用设置</h3><p>完成初步 Facebook SDK 设置后，您需要在 <strong><a href="/apps">Facebook 应用设置</a></strong>中添加深度链接信息。</p><h4 id="settings-ios">iOS 设置</h4><ul class="uiList -cx-PRIVATE-uiList__bulleted -cx-PRIVATE-uiList__vert"><li><div class="fcb"><strong>网址方案后缀</strong>：如果您的网址方案是 <code>://</code>，则请添加没有 <code>mytravelapp</code> 的网址方案，例如 <code>mytravelapp://</code>。</div></li><li><div class="fcb"><strong>App Store 编号</strong>：您可以获取 App Store 编号，例如从 App Store 网址获取：<em>https://itunes.apple.com/us/app/my-app/<code>APP_STORE_ID</code></em>。</div></li></ul><h4 id="android-settings">Android 设置</h4><ul class="uiList -cx-PRIVATE-uiList__bulleted -cx-PRIVATE-uiList__vert"><li><div class="fcb"><strong>类名</strong>：在 <code>AndroidManifest.xml</code>.文件中找到启动活动的类名。类名的形式应为 <code>com.example.androidapp.MainActivity</code>。</div></li></ul><div class="-cx-PRIVATE-devsiteMarkdownImageCard__root"><div class="-cx-PRIVATE-xuiCard__root mvl -cx-PRIVATE-devsiteMarkdownImageCard__card -cx-PRIVATE-xuiCommon__backgroundwhite"><div class="-cx-PRIVATE-xuiCard__section -cx-PRIVATE-xuiCardFullBleedSection__root -cx-PRIVATE-xuiCardPhotoSection__root -cx-PRIVATE-wwwText__textaligncenter"><img class="-cx-PRIVATE-devsiteMarkdownImageCard__image" src="https://scontent-iad3-1.xx.fbcdn.net/t39.2178-6/11414380_410471802465873_567428398_n.png"></div><div class="-cx-PRIVATE-xuiCard__section pam -cx-PRIVATE-devsiteMarkdownImageCard__caption -cx-PRIVATE-xuiCommon__backgroundlightwash">iOS — 导航至“应用面板 &gt; 设置 &gt; iOS”</div></div></div><div class="-cx-PRIVATE-devsiteMarkdownImageCard__root"><div class="-cx-PRIVATE-xuiCard__root mvl -cx-PRIVATE-devsiteMarkdownImageCard__card -cx-PRIVATE-xuiCommon__backgroundwhite"><div class="-cx-PRIVATE-xuiCard__section -cx-PRIVATE-xuiCardFullBleedSection__root -cx-PRIVATE-xuiCardPhotoSection__root -cx-PRIVATE-wwwText__textaligncenter"><img class="-cx-PRIVATE-devsiteMarkdownImageCard__image" src="https://fbcdn-dragon-a.akamaihd.net/hphotos-ak-xtf1/t39.2178-6/11409193_475280685982125_1690853610_n.png"></div><div class="-cx-PRIVATE-xuiCard__section pam -cx-PRIVATE-devsiteMarkdownImageCard__caption -cx-PRIVATE-xuiCommon__backgroundlightwash">Android — 导航至“应用面板 &gt; 设置 &gt; Android”</div></div></div><h3 id="deferred-deep-linking">4.延迟的深度链接（可选）</h3><p>延迟的深度链接可在用户通过应用商店<strong>安装</strong>您的应用后，将用户定向至一个自定义的视图。</p><h4>何时需要使用延迟的深度链接？</h4><p>如果您投放使用深度链接的广告，且定位尚未安装应用的用户，则<strong>必须</strong>添加延迟的深度链接。如果您只定位已安装应用的用户，则无需添加延迟的深度链接。</p><h4>借由应用链接实现延迟的深度链接</h4><p>iOS 版和 Android 版 Facebook SDK 包含名为<a href="/docs/applinks">应用链接</a>的产品，可用于在应用内实施延迟的深度链接。在实施深度链接后，只需将以下代码添加到应用即可处理延迟的深度链接：</p><h4>iOS SDK</h4><pre class="prettyprint lang-m prettyprinted"><code> 
// 将 Bolts.framework 添加到项目中（这是 FB SDK 的组成部分）
#import &lt;Bolts/Bolts.h&gt; 
#import &lt;FBSDKCoreKit/FBSDKCoreKit.h&gt;

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {
  if (launchOptions[UIApplicationLaunchOptionsURLKey] == nil) {
    [FBSDKAppLinkUtility fetchDeferredAppLink:^(NSURL *url, NSError *error) {
      if (error) {
        NSLog(@”Received error while fetching deferred app link %@”, error);
      }
      if (url) {
        [[UIApplication sharedApplication] openURL:url];
      }
    }];
  }
  return YES;
}
</code></pre><h4>Android SDK</h4><pre class="prettyprint lang-m prettyprinted"><code> 
AppLinkData.fetchDeferredAppLinkData(this, 
  new AppLinkData.CompletionHandler() {
     @Override
     public void onDeferredAppLinkDataFetched(AppLinkData appLinkData) {
         // 处理应用链接数据
     }
 }
);

</code></pre><hr><p><strong>类参考：</strong>iOS &gt; <a href="/docs/reference/ios/current/class/FBSDKAppLinkUtility#fetchDeferredAppLink">FBSDKAppLinkUtility</a> | Android &gt; <a href="/docs/reference/android/current/class/AppLinkData/">AppLinkData</a></p><h3 id="verify">5.验证深度链接设置</h3><p>您可以在“工具和支持”部分的<strong><a href="/tools/app-ads-helper/">应用广告帮手</a></strong>中验证您的 Facebook SDK 和深度链接设置。建议先验证设置，然后开始投放深度链接广告。</p><a class="-cx-PRIVATE-abstractButton__root -cx-PRIVATE-devsiteDocsButton__root -cx-PRIVATE-devsiteDocsButton__large -cx-PRIVATE-devsiteDocsButton__confirm" role="button" href="/tools/app-ads-helper/">验证深度链接设置</a><h3 id="create-deeplink-ad">6.为广告添加深度链接</h3><p>依照关于<strong><a href="/docs/ads-for-apps-dev/creating-ads">创建应用广告</a></strong>的指南进行操作。创建广告时，请留意下述设置：</p><ol><li><strong>定位平台</strong>：在<em>“设置广告受众”</em>部分做选择：

<ul class="uiList -cx-PRIVATE-uiList__bulleted -cx-PRIVATE-uiList__vert"><li><div class="fcb"><strong>iOS</strong>：为<strong>平台</strong>设置选择 <code>iOS only</code>。</div></li><li><div class="fcb"><strong>Android</strong>：为<strong>平台</strong>设置选择 <code>Android only</code></div></li></ul></li><li><strong>添加深度链接</strong>：在<em>“设置广告链接和文本”</em>部分，添加深度链接，例如 <code>mytravelapp://tripId=SF</code>，如下方截图所示。</li></ol><hr><div class="-cx-PRIVATE-devsiteMarkdownImageCard__root"><div class="-cx-PRIVATE-xuiCard__root mvl -cx-PRIVATE-devsiteMarkdownImageCard__card -cx-PRIVATE-xuiCommon__backgroundwhite"><div class="-cx-PRIVATE-xuiCard__section -cx-PRIVATE-xuiCardFullBleedSection__root -cx-PRIVATE-xuiCardPhotoSection__root -cx-PRIVATE-wwwText__textaligncenter"><img class="-cx-PRIVATE-devsiteMarkdownImageCard__image" src="https://fbcdn-dragon-a.akamaihd.net/hphotos-ak-xfa1/t39.2178-6/11404834_489536244544067_2128620228_n.png"></div><div class="-cx-PRIVATE-xuiCard__section pam -cx-PRIVATE-devsiteMarkdownImageCard__caption -cx-PRIVATE-xuiCommon__backgroundlightwash">截图： 为广告添加深度链接</div></div></div></div></div><div class="-cx-PRIVATE-xuiCard__root -cx-PRIVATE-devsiteCard__root -cx-PRIVATE-devsiteCard__prettyprint-dark -cx-PRIVATE-xuiCommon__backgroundwhite"><div class="-cx-PRIVATE-xuiCard__section -cx-PUBLIC-devsiteCard__contentsection"><h2 id="next">后续步骤</h2><a class="-cx-PRIVATE-abstractButton__root -cx-PRIVATE-devsiteDocsButton__root -cx-PRIVATE-devsiteDocsButton__large -cx-PRIVATE-devsiteDocsButton__special" role="button" href="https://www.facebook.com/ads/create" target="_blank">创建广告</a><a class="-cx-PRIVATE-abstractButton__root -cx-PRIVATE-devsiteDocsButton__root -cx-PRIVATE-devsiteDocsButton__large -cx-PRIVATE-devsiteDocsButton__default" role="button" href="/docs/app-ads/formats/engagement-ads">如何创建使用率广告</a><a class="-cx-PRIVATE-abstractButton__root -cx-PRIVATE-devsiteDocsButton__root -cx-PRIVATE-devsiteDocsButton__large -cx-PRIVATE-devsiteDocsButton__default" role="button" href="/docs/app-ads/measuring/installs-and-in-app-conversions">安装和应用内转化追踪</a></div></div></div>